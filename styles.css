:root{ --bg:#0E0F12; --fg:#EAEAEA; --muted:#9AA0A6; --accent:#5A0E2E; --accent2:#106C6C; }
*{ box-sizing:border-box }
body{ margin:0; font:16px/1.45 Inter,-apple-system,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;
      color:var(--fg); background:linear-gradient(180deg,#121318,#0E0F12); }
header{ display:flex; align-items:center; gap:12px; padding:14px 18px; position:sticky; top:0;
        background:rgba(14,15,18,.75); backdrop-filter:blur(10px); border-bottom:1px solid #222; }
header img.logo{ width:36px; height:36px; border-radius:9px }
h1{ margin:0; font-size:20px }
.container{ max-width:1100px; margin:24px auto; padding:0 20px }
.card{ background:#15171D; border:1px solid #21232B; border-radius:16px; padding:16px; margin:16px 0;
       box-shadow:0 8px 24px rgba(0,0,0,.25); }
button{ background:linear-gradient(135deg,var(--accent),var(--accent2)); color:#fff; border:0;
        border-radius:12px; padding:12px 16px; font-weight:600; cursor:pointer }
input,select{ width:100%; padding:10px 12px; background:#0F1116; color:var(--fg);
              border:1px solid #262a33; border-radius:10px }
.grid{ display:grid; gap:12px } .cols-2{ grid-template-columns:1fr 1fr }
@media(max-width:800px){ .cols-2{ grid-template-columns:1fr } }
footer{ opacity:.6; text-align:center; padding:24px }
a{ color:#9dd5d5 }

/* ---------- Wine cards ---------- */
.wine-card{ display:flex; gap:14px; align-items:flex-start; }
.label-img{ width:60px; height:90px; object-fit:cover; border-radius:8px; border:1px solid #2a2e39 }
.wine-info{ flex:1 }
.wine-info .meta{ margin-top:8px; display:flex; flex-wrap:wrap; gap:8px; }

.badge{
  background:#1b1e25;
  padding:6px 10px;
  border:1px solid #2a2e39;
  border-radius:999px;
  color:#cfd3da;
  font-size:12px;
  display:inline-flex;
  align-items:center;
  gap:6px;
}
.badge .tiny{ opacity:.7; }

/* Clickable ‚Äúchip‚Äù (e.g. cellar) */
.chip{ cursor:pointer; user-select:none; }
.chip.btn{ background:#182027; border-color:#2b3a44; }
.chip.btn:hover{ filter:brightness(1.1); }

/* ---------- Tooltip for cellar chip ---------- */
.tip{
  position:fixed;
  display:none;
  background:#0f1216;
  border:1px solid #2a3240;
  color:#e7ecf3;
  border-radius:12px;
  padding:10px;
  box-shadow:0 10px 24px rgba(0,0,0,.45);
  z-index:9999;
  min-width:240px;
}
.tip-row{
  padding:8px 10px;
  border-radius:8px;
  border:1px dashed transparent;
}
.tip-row:hover{
  background:#152029;
  border-color:#2b3b48;
}
.tip-empty{ opacity:.7; padding:6px 4px }

/* --- Tooltip hover color for linked rack cell --- */
.cell.hover-highlight {
  background: #24573a;
  border-color: #46f6a3;
  box-shadow: 0 0 16px 4px rgba(70,246,163,.6);
  transform: scale(1.05);
  transition: all 0.25s ease;
}
/* ---------- Cellar map ---------- */
.cellar-note{ opacity:.7; font-size:13px; margin:4px 0 12px; }

.rack{ margin:18px 0 28px; }
.rack-title{ font-weight:700; opacity:.85; margin:0 0 10px 2px; }

.rack-grid{
  display:grid;
  grid-template-columns: repeat(6, minmax(88px, 1fr));
  gap:10px;
}
.cell{
  background:#0f1216;
  border:1px solid #2a2f38;
  border-radius:10px;
  height:54px;
  display:flex; align-items:center; justify-content:center;
  color:#cdd3da;
  font-weight:600;
  letter-spacing:.2px;
  position:relative;
  transition:all .2s ease;
}
.cell.has{
  background:#102318;
  border-color:#2b7a4d;
  color:#cfeee0;
}
.cell.has::after{
  content:'';
  position:absolute; inset:0;
  border-radius:10px;
  box-shadow:inset 0 0 0 2px rgba(59,214,140,.18);
  pointer-events:none;
}

/* Hover / highlight / pulse on match */
.cell.highlight{
  background:#193826;
  border-color:#3bd68c;
  box-shadow:0 0 10px #3bd68c;
  transform:scale(1.04);
  transition:all .25s ease;
}
@keyframes pulseGlow{
  0%   { box-shadow:0 0 0 0 rgba(59,214,140,.8); }
  70%  { box-shadow:0 0 0 16px rgba(59,214,140,0); }
  100% { box-shadow:0 0 0 0 rgba(59,214,140,0); }
}
.cell.pulse{ animation:pulseGlow 1.2s ease-out 1; }

/* Smaller badges inside meta line */
.badge.flag { padding-left:8px }
.badge.grape{ }
.badge.producer{ background:#2b1c13; border-color:#4b2b1c; color:#f0e2d6 } /* üè∑Ô∏è ‚Äúbrown card/label‚Äù */
.badge.taste{ }  /* keep üç∑ icon */
